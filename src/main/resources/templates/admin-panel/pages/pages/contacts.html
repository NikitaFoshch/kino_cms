<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin-panel/fragments/head :: head}"></head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">

    <!-- Navbar -->
    <th:block th:insert="~{admin-panel/fragments/navbar :: navbar}"></th:block>

    <!-- /.navbar -->
    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-light-primary elevation-4">
        <!-- Brand Logo -->
        <a href="/admin/statistics" class="brand-link">
            <img src="/img/AdminLTELogo2.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
                 style="opacity: .8">
            <span class="brand-text font-weight-light">Kino-CMS</span>
        </a>

        <!-- Sidebar -->
        <th:block th:insert="~{admin-panel/fragments/sidebar :: sidebar}"></th:block>

        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">
                <form th:method="POST" th:action="${'/admin/pages/contacts-page-update'}" th:object="${contactsPage}"
                      enctype="multipart/form-data">
                    <div class="row pt-2" th:each="cinemaInfo, i :${contactsPage.cinemaInfoList}">
                        <input type="text" th:field="*{cinemaInfoList[__${i.index}__].id}" hidden>
                        <input type="text" th:field="*{cinemaInfoList[__${i.index}__].default}" hidden>
                        <input type="text" th:field="*{cinemaInfoList[__${i.index}__].contactsPage.id}" hidden>
                        <input type="text" th:field="*{id}" hidden>
                        <div class="col-md-12">
                            <div class="card card-default card-outline">
                                <div class="card-body">
                                    <div class="row pt-4">
                                        <div class="col-md-5">
                                            <div class="form-group row">
                                                <label th:for="${'cinema-name-' + i.index}"
                                                       class="col-md-4 col-form-label">Название
                                                    кинотеатра</label>
                                                <div class="col-md-8">
                                                    <input type="text" class="form-control"
                                                           th:id="${'cinema-name-' + i.index}"
                                                           placeholder="Название кинотеатра"
                                                           th:field="*{cinemaInfoList[__${i.index}__].cinemaName}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mt-2 text-right" th:if="${!cinemaInfo.default}">
                                            <div class="custom-control custom-switch custom-switch-off-gray custom-switch-on-success">
                                                <input type="checkbox" class="custom-control-input"
                                                       th:id="${'switch-' + i.index}"
                                                       th:field="*{cinemaInfoList[__${i.index}__].disabled}">
                                                <label class="custom-control-label"
                                                       th:for="${'switch-' + i.index}"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-4">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="description" class="col-md-1 col-form-label">Адрес</label>
                                                <textarea class="col-form-label col-md-10 form-control" rows="5"
                                                          id="description"
                                                          placeholder="Адрес"
                                                          th:field="*{cinemaInfoList[__${i.index}__].address}"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-4">
                                        <div class="col-md-5">
                                            <div class="form-group row">
                                                <label for="coordinate" class="col-md-4 col-form-label">Координаты для
                                                    карты</label>
                                                <div class="col-md-8">
                                                    <input type="text" class="form-control" id="coordinate"
                                                           placeholder="Координаты для карты"
                                                           th:field="*{cinemaInfoList[__${i.index}__].coordinates}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-4">
                                        <label class="col-md-auto form-group">Лого</label>
                                        <div class="col-md-2 text-center">
                                            <img th:src="${cinemaInfo.logo == null} ? ${'/img/common/no-image.jpg'} : ${'/files/' + cinemaInfo.logo}"
                                                 class="product-image"
                                                 alt="Logo">
                                        </div>
                                        <div class="col-md-auto mt-auto mb-auto">
                                            <div class="input-group">
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="logo"
                                                           accept="image/jpeg, image/png"
                                                           th:field="*{cinemaInfoList[__${i.index}__].file}">
                                                    <label class="custom-file-label" for="logo"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-4" th:if="${!cinemaInfo.default}">
                                        <div class="col-md-auto m-auto">
                                            <a th:href="'/admin/pages/cinema-info-delete/' + *{cinemaInfoList[__${i.index}__].id}" type="button" class="btn btn-lg btn-block btn-default">
                                                Удалить
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row pb-4">
                        <div class="col-md-auto m-auto">
                            <a href="/admin/pages/cinema-info-page-add" type="button"
                               class="btn btn-lg btn-block btn-default"><i
                                    class="fa-solid fa-plus pr-2"></i>Добавить еще кинотеатр
                            </a>
                        </div>
                    </div>
                    <div class="row pt-4">
                        <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-md-2 col-form-label">SEO блок</label>
                                <input type="text" th:field="*{seo.id}" hidden>
                                <div class="col-md-8">
                                    <div class="form-group row">
                                        <label for="seo-url"
                                               class="col-md-auto ml-5 text-right col-form-label">URL:</label>
                                        <div class="col-md-10 ml-1">
                                            <input type="text" class="form-control" id="seo-url"
                                                   placeholder="URL" th:field="*{seo.url}">
                                        </div>
                                    </div>
                                    <div class="row pt-2">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="seo-title" class="col-md-1 text-right ml-4 col-form-label">Title:</label>
                                                <div class="col-md-10">
                                                    <input type="text" class="form-control" id="seo-title"
                                                           placeholder="Title" th:field="*{seo.title}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-2 ">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="seo-keywords"
                                                       class="col-md-1 text-right ml-2 col-form-label">Keywords:</label>
                                                <div class="col-md-10 ml-3">
                                                    <input type="text" class="form-control" id="seo-keywords"
                                                           placeholder="Keywords" th:field="*{seo.keywords}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-2">
                                        <div class="col-md-12">
                                            <div class="form-group row">
                                                <label for="seo-description" class="col-md-1 mr-1 col-form-label">Description:</label>
                                                <textarea class="col-form-label col-md-10 ml-4 form-control" rows="5"
                                                          id="seo-description" placeholder="Description"
                                                          th:field="*{seo.description}"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row pb-4">
                        <div class="col-2 m-auto">
                            <button type="submit" class="btn btn-block btn-default">Сохранить</button>
                        </div>
                    </div>
                </form>
            </div>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->

    </div>
    <!-- ./wrapper -->
</div>
<th:block th:insert="~{admin-panel/fragments/js :: js}"></th:block>
<script src="/js/bs-file-input/bs-custom-file-input.min.js"></script>
<script>
    $(function () {
        bsCustomFileInput.init();
    });
    $(document).on('change', '.custom-file-input', function (e) {
        $(this).parents('div.row.pt-4').find('img').attr('src', URL.createObjectURL(e.target.files[0]));
    });
</script>
</body>
</html>
